


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1252"> 
  <title>Coverage Report > GameOverScreen</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.heslingtonhustle.screens</a>
</div>

<h1>Coverage Summary for Class: GameOverScreen (com.heslingtonhustle.screens)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">GameOverScreen</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/17)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/186)
  </span>
</td>
</tr>
  <tr>
    <td class="name">GameOverScreen$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">GameOverScreen$2</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">GameOverScreen$3</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/4)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">GameOverScreen$4</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/7)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/25)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/204)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package com.heslingtonhustle.screens;
&nbsp;
&nbsp;import com.badlogic.gdx.Gdx;
&nbsp;import com.badlogic.gdx.Screen;
&nbsp;import com.badlogic.gdx.graphics.GL20;
&nbsp;import com.badlogic.gdx.graphics.Texture;
&nbsp;import com.badlogic.gdx.scenes.scene2d.Actor;
&nbsp;import com.badlogic.gdx.scenes.scene2d.Stage;
&nbsp;import com.badlogic.gdx.scenes.scene2d.ui.Image;
&nbsp;import com.badlogic.gdx.scenes.scene2d.ui.Window;
&nbsp;import com.badlogic.gdx.scenes.scene2d.ui.Skin;
&nbsp;import com.badlogic.gdx.scenes.scene2d.ui.Label;
&nbsp;import com.badlogic.gdx.scenes.scene2d.ui.Table;
&nbsp;import com.badlogic.gdx.scenes.scene2d.ui.TextButton;
&nbsp;import com.badlogic.gdx.scenes.scene2d.ui.TextField;
&nbsp;import com.badlogic.gdx.scenes.scene2d.utils.ChangeListener;
&nbsp;import com.badlogic.gdx.utils.Array;
&nbsp;import com.badlogic.gdx.utils.viewport.FitViewport;
&nbsp;import com.heslingtonhustle.HeslingtonHustleGame;
&nbsp;import com.heslingtonhustle.sound.SoundController;
&nbsp;import com.heslingtonhustle.sound.Sounds;
&nbsp;import com.heslingtonhustle.state.Achievement;
&nbsp;import com.heslingtonhustle.state.Activity;
&nbsp;import com.heslingtonhustle.state.LeaderboardManager;
&nbsp;
&nbsp;import java.util.HashMap;
&nbsp;import java.util.HashSet;
&nbsp;
&nbsp;/**
&nbsp; * A screen to display the user&#39;s score, along with any secret achievements
&nbsp; * or debuffs they encountered.
&nbsp; */
<b class="nc">&nbsp;public class GameOverScreen implements Screen {</b>
&nbsp;    private final HeslingtonHustleGame game;
&nbsp;    private final Skin skin;
&nbsp;    private final SoundController soundController;
&nbsp;    // UI Elements
&nbsp;    private final Stage stage;
&nbsp;    private final Texture backgroundTexture;
&nbsp;    private final Window queryWindow;
&nbsp;    private final Window nameEntryWindow;
&nbsp;
&nbsp;    // Player game data
&nbsp;    private final HashMap&lt;String, Activity&gt; activities;
&nbsp;    private final boolean stepAchievement;
<b class="nc">&nbsp;    private final HashSet&lt;Achievement&gt; achievements = new HashSet&lt;&gt;();</b>
<b class="nc">&nbsp;    private int numAchievements = 0;</b>
&nbsp;
&nbsp;    // The scores for each category
<b class="nc">&nbsp;    private final HashMap&lt;String, Integer&gt; categoryScores = new HashMap&lt;String, Integer&gt;();</b>
&nbsp;    // The number of times an event in each category was completed
<b class="nc">&nbsp;    private final HashMap&lt;String, Integer&gt; categoryHours = new HashMap&lt;String, Integer&gt;();</b>
&nbsp;
&nbsp;    public static final String gameOverPath = &quot;Graphics/UI/Gameover/page.png&quot;;
&nbsp;    public static final String gameOverTableBackgroundAsset = &quot;Graphics/UI/Backgrounds/table_background.jpg&quot;;
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Creates the screen and fills in all the user&#39;s score information.
&nbsp;     * @param game Game class
&nbsp;     * @param activities Hashmap that maps a String to an Activity object
&nbsp;     */
<b class="nc">&nbsp;    public GameOverScreen(HeslingtonHustleGame game, HashMap&lt;String, Activity&gt; activities, boolean stepAchievement) {</b>
<b class="nc">&nbsp;        this.game = game;</b>
<b class="nc">&nbsp;        this.activities = activities;</b>
<b class="nc">&nbsp;        this.stepAchievement = stepAchievement;</b>
&nbsp;
<b class="nc">&nbsp;        this.skin = game.skin;</b>
<b class="nc">&nbsp;        this.soundController = game.soundController;</b>
&nbsp;
&nbsp;        // UI Stage
<b class="nc">&nbsp;        stage = new Stage(new FitViewport(game.width, game.height));</b>
<b class="nc">&nbsp;        Gdx.input.setInputProcessor(stage);</b>
&nbsp;
&nbsp;        // Background table image
<b class="nc">&nbsp;        backgroundTexture = new Texture(gameOverTableBackgroundAsset);</b>
<b class="nc">&nbsp;        Image backgroundImage = new Image(backgroundTexture);</b>
<b class="nc">&nbsp;        stage.addActor(backgroundImage);</b>
&nbsp;
&nbsp;        // Figure out which achievements/penalties the player has got
<b class="nc">&nbsp;        populateCategoryInformation();</b>
<b class="nc">&nbsp;        getAchievements();</b>
<b class="nc">&nbsp;        getPenalties();</b>
&nbsp;
&nbsp;        // Show the player&#39;s score breakdown
<b class="nc">&nbsp;        drawScorePaper();</b>
&nbsp;        // Draw banners for penalties and achievements
<b class="nc">&nbsp;        drawBanners();</b>
&nbsp;
&nbsp;        // Popup windows
<b class="nc">&nbsp;        queryWindow = leaderBoardQueryScreen();</b>
<b class="nc">&nbsp;        stage.addActor(queryWindow);</b>
&nbsp;
<b class="nc">&nbsp;        nameEntryWindow = enterNameWindow();</b>
<b class="nc">&nbsp;        stage.addActor(nameEntryWindow);</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Calculates the final score the player got
&nbsp;     * @return The player&#39;s score
&nbsp;     */
&nbsp;    private int calcScore() {
<b class="nc">&nbsp;        int score = 0;</b>
&nbsp;
&nbsp;        // Add score for activities
<b class="nc">&nbsp;        for (Activity activity : activities.values()) {</b>
<b class="nc">&nbsp;            score += activity.getScore() * activity.getTimesCompleted();</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
&nbsp;        // Add/minus penalties and achievements
<b class="nc">&nbsp;        for (Achievement achievement : achievements) {</b>
<b class="nc">&nbsp;            score += achievement.getScore();</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        return score;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Populates the HashMaps for the amount of score gained from
&nbsp;     * each category and the number of times an event in each category
&nbsp;     * was completed.
&nbsp;     */
&nbsp;    private void populateCategoryInformation() {
<b class="nc">&nbsp;        categoryScores.put(&quot;sleep&quot;, 0);</b>
<b class="nc">&nbsp;        categoryScores.put(&quot;study&quot;, 0);</b>
<b class="nc">&nbsp;        categoryScores.put(&quot;recreation&quot;, 0);</b>
<b class="nc">&nbsp;        categoryScores.put(&quot;eat&quot;, 0);</b>
&nbsp;
<b class="nc">&nbsp;        categoryHours.put(&quot;sleep&quot;, 0);</b>
<b class="nc">&nbsp;        categoryHours.put(&quot;study&quot;, 0);</b>
<b class="nc">&nbsp;        categoryHours.put(&quot;recreation&quot;, 0);</b>
<b class="nc">&nbsp;        categoryHours.put(&quot;eat&quot;, 0);</b>
&nbsp;
&nbsp;        // For each activity
<b class="nc">&nbsp;        for (Activity activity : activities.values()) {</b>
&nbsp;            // Find the score for this type, and add this activity&#39;s score
<b class="nc">&nbsp;            if (categoryScores.containsKey(activity.getScoreType())) {</b>
<b class="nc">&nbsp;                int score = categoryScores.get(activity.getScoreType());</b>
<b class="nc">&nbsp;                categoryScores.put(activity.getScoreType(), score + activity.getScore() * activity.getTimesCompleted());</b>
&nbsp;
&nbsp;                // Same with the number of times completed
&nbsp;                // For eating just add times done
<b class="nc">&nbsp;                if (activity.getScoreType().equals(&quot;eat&quot;)) {</b>
<b class="nc">&nbsp;                    int times = categoryHours.get(activity.getScoreType());</b>
<b class="nc">&nbsp;                    categoryHours.put(&quot;eat&quot;, times + activity.getTimesCompleted());</b>
<b class="nc">&nbsp;                } else {</b>
<b class="nc">&nbsp;                    int hours = categoryHours.get(activity.getScoreType());</b>
<b class="nc">&nbsp;                    categoryHours.put(activity.getScoreType(), hours + activity.getHoursSpent());</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Formats and draws the player&#39;s score breakdown in the form
&nbsp;     * of a report card
&nbsp;     */
&nbsp;    private void drawScorePaper() {
&nbsp;        // Background page
<b class="nc">&nbsp;        Texture pageTexture = new Texture(gameOverPath);</b>
<b class="nc">&nbsp;        Image pageImage = new Image(pageTexture);</b>
<b class="nc">&nbsp;        pageImage.setPosition(</b>
<b class="nc">&nbsp;                (game.width - pageImage.getWidth()) / 2,</b>
<b class="nc">&nbsp;                (game.height - pageImage.getHeight()) / 2);</b>
<b class="nc">&nbsp;        stage.addActor(pageImage);</b>
&nbsp;
&nbsp;        // Game over text
<b class="nc">&nbsp;        Label gameOver = new Label(&quot;Game Over!&quot;, game.skin, &quot;handwriting80px&quot;);</b>
<b class="nc">&nbsp;        gameOver.setPosition((game.width - gameOver.getWidth()) / 2 - 20, game.height-150);</b>
<b class="nc">&nbsp;        stage.addActor(gameOver);</b>
&nbsp;
&nbsp;
&nbsp;        // The individual score lines to write to the paper
<b class="nc">&nbsp;        Array&lt;String&gt; scoreLines = new Array&lt;String&gt;();</b>
<b class="nc">&nbsp;        scoreLines.add(&quot;Hours slept: &quot; + categoryHours.get(&quot;sleep&quot;));</b>
<b class="nc">&nbsp;        scoreLines.add(&quot;Hours studied: &quot; + categoryHours.get(&quot;study&quot;));</b>
<b class="nc">&nbsp;        scoreLines.add(&quot;Hours of fun: &quot; + categoryHours.get(&quot;recreation&quot;));</b>
<b class="nc">&nbsp;        scoreLines.add(&quot;Times ate: &quot; + categoryHours.get(&quot;eat&quot;));</b>
<b class="nc">&nbsp;        scoreLines.add(&quot;Streaks: &quot; + numAchievements);</b>
<b class="nc">&nbsp;        scoreLines.add(&quot;Penalties: &quot; + (achievements.size() - numAchievements));</b>
&nbsp;
&nbsp;        // Draw lines of text
<b class="nc">&nbsp;        for (int i = 0; i &lt; scoreLines.size; i++) {</b>
&nbsp;            // After the 4th line add a break
<b class="nc">&nbsp;            int j = (i &gt;= 4) ? 1 : 0;</b>
<b class="nc">&nbsp;            Label line = new Label(scoreLines.get(i), game.skin, &quot;handwriting48px&quot;);</b>
&nbsp;
<b class="nc">&nbsp;            line.setPosition(game.width / 2f - 183, game.height - ((i+j)*48 + 239));</b>
<b class="nc">&nbsp;            stage.addActor(line);</b>
&nbsp;        }
&nbsp;
&nbsp;
&nbsp;        // Final score text
<b class="nc">&nbsp;        Label scoreText = new Label(&quot;Score: &quot; + calcScore(), game.skin, &quot;handwriting64px&quot;);</b>
<b class="nc">&nbsp;        scoreText.setPosition((game.width - gameOver.getWidth()) / 2 - 20, 93);</b>
<b class="nc">&nbsp;        stage.addActor(scoreText);</b>
&nbsp;
&nbsp;
&nbsp;        // Continue Button
<b class="nc">&nbsp;        TextButton continueButton = new TextButton(&quot;Continue&quot;, game.skin);</b>
<b class="nc">&nbsp;        continueButton.setPosition(game.width - 315, 15);</b>
<b class="nc">&nbsp;        continueButton.setWidth(300);</b>
<b class="nc">&nbsp;        stage.addActor(continueButton);</b>
<b class="nc">&nbsp;        continueButton.addListener(new ChangeListener() {</b>
&nbsp;            @Override
&nbsp;            public void changed(ChangeEvent event, Actor actor) {
<b class="nc">&nbsp;                if (!queryWindow.isVisible() &amp;&amp; !nameEntryWindow.isVisible()) {</b>
<b class="nc">&nbsp;                    game.soundController.playSound(Sounds.CONFIRM);</b>
<b class="nc">&nbsp;                    queryWindow.setVisible(true);</b>
&nbsp;                }
&nbsp;            }
&nbsp;        });
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Draws banners and explanations for the secret achievements the player
&nbsp;     * reached
&nbsp;     */
&nbsp;    private void drawBanners() {
<b class="nc">&nbsp;        Table achievementTable = new Table();</b>
<b class="nc">&nbsp;        Table penaltyTable = new Table();</b>
&nbsp;
<b class="nc">&nbsp;        for (Achievement achievement : achievements) {</b>
<b class="nc">&nbsp;            TextButton banner = new TextButton(achievement.getTitle(), skin, &quot;banner&quot;);</b>
<b class="nc">&nbsp;            Label description = new Label(achievement.getDescription(), skin, &quot;achievementlabel&quot;);</b>
<b class="nc">&nbsp;            Label score = new Label(Integer.toString(achievement.getScore()), skin, &quot;achievementscore&quot;);</b>
&nbsp;
<b class="nc">&nbsp;            if (achievement.isPositive()) {</b>
&nbsp;                // Achievement
<b class="nc">&nbsp;                achievementTable.add(banner).padBottom(20).prefWidth(300);</b>
<b class="nc">&nbsp;                achievementTable.row();</b>
<b class="nc">&nbsp;                achievementTable.add(description).padBottom(10);</b>
<b class="nc">&nbsp;                achievementTable.row();</b>
<b class="nc">&nbsp;                achievementTable.add(score);</b>
<b class="nc">&nbsp;                achievementTable.row();</b>
&nbsp;            } else {
&nbsp;                // Penalty
<b class="nc">&nbsp;                banner.setDisabled(true);</b>
<b class="nc">&nbsp;                penaltyTable.add(banner).padBottom(20).prefWidth(300);</b>
<b class="nc">&nbsp;                penaltyTable.row();</b>
<b class="nc">&nbsp;                penaltyTable.add(description).padBottom(10);</b>
<b class="nc">&nbsp;                penaltyTable.row();</b>
<b class="nc">&nbsp;                penaltyTable.add(score);</b>
<b class="nc">&nbsp;                penaltyTable.row();</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;        }</b>
&nbsp;
&nbsp;        // Add both tables to the stage
<b class="nc">&nbsp;        achievementTable.setWidth(300);</b>
<b class="nc">&nbsp;        achievementTable.setPosition(game.width-350, (game.height - achievementTable.getHeight()) / 2 + 30);</b>
<b class="nc">&nbsp;        stage.addActor(achievementTable);</b>
&nbsp;
<b class="nc">&nbsp;        penaltyTable.setWidth(300);</b>
<b class="nc">&nbsp;        penaltyTable.setPosition(30, (game.height - achievementTable.getHeight()) / 2 + 30);</b>
<b class="nc">&nbsp;        stage.addActor(penaltyTable);</b>
&nbsp;
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * A simple popup window that asks the user if they would like to
&nbsp;     * submit their score to the leaderboard
&nbsp;     * @return Leaderboard popup window.
&nbsp;     */
&nbsp;    private Window leaderBoardQueryScreen() {
<b class="nc">&nbsp;        Window popupWindow = new Window(&quot;&quot;, game.skin, &quot;popup&quot;);</b>
<b class="nc">&nbsp;        popupWindow.setSize(480, 280);</b>
<b class="nc">&nbsp;        popupWindow.setPosition(</b>
<b class="nc">&nbsp;                (game.width - popupWindow.getWidth()) / 2,</b>
<b class="nc">&nbsp;                (game.height - popupWindow.getHeight()) / 2</b>
&nbsp;        );
&nbsp;
&nbsp;        // Table for elements
<b class="nc">&nbsp;        Table popupTable = new Table();</b>
<b class="nc">&nbsp;        popupWindow.add(popupTable).prefSize(popupWindow.getWidth(), popupTable.getHeight());</b>
&nbsp;
&nbsp;        // Question
<b class="nc">&nbsp;        Label question = new Label(&quot;Submit your score to the leaderboard?&quot;, game.skin, &quot;leaderboardscore&quot;);</b>
<b class="nc">&nbsp;        question.setWrap(true);</b>
<b class="nc">&nbsp;        question.setAlignment(1);</b>
<b class="nc">&nbsp;        popupTable.add(question).prefWidth(popupWindow.getWidth() * 0.9f).colspan(2).padTop(10);</b>
<b class="nc">&nbsp;        popupTable.row().padTop(20);</b>
&nbsp;
&nbsp;        // Two buttons
<b class="nc">&nbsp;        TextButton yesButton = new TextButton(&quot;Yes&quot;, game.skin);</b>
<b class="nc">&nbsp;        TextButton noButton = new TextButton(&quot;No&quot;, game.skin);</b>
&nbsp;
<b class="nc">&nbsp;        popupTable.add(yesButton).prefWidth(120);</b>
<b class="nc">&nbsp;        popupTable.add(noButton).prefWidth(120);</b>
&nbsp;
<b class="nc">&nbsp;        noButton.addListener(new ChangeListener() {</b>
&nbsp;            @Override
&nbsp;            public void changed(ChangeListener.ChangeEvent event, Actor actor) {
<b class="nc">&nbsp;                game.soundController.playSound(Sounds.CONFIRM);</b>
<b class="nc">&nbsp;                game.switchScreen(AvailableScreens.MenuScreen, false);</b>
&nbsp;            }
&nbsp;        });
&nbsp;
<b class="nc">&nbsp;        yesButton.addListener(new ChangeListener() {</b>
&nbsp;            @Override
&nbsp;            public void changed(ChangeListener.ChangeEvent event, Actor actor) {
<b class="nc">&nbsp;                game.soundController.playSound(Sounds.CONFIRM);</b>
<b class="nc">&nbsp;                queryWindow.setVisible(false);</b>
<b class="nc">&nbsp;                nameEntryWindow.setVisible(true);</b>
&nbsp;            }
&nbsp;        });
&nbsp;
<b class="nc">&nbsp;        popupWindow.setVisible(false);</b>
<b class="nc">&nbsp;        return popupWindow;</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * A window to ask the player for their name
&nbsp;     * @return Leaderboard popup window.
&nbsp;     */
&nbsp;    private Window enterNameWindow() {
<b class="nc">&nbsp;        Window popupWindow = new Window(&quot;&quot;, game.skin, &quot;popup&quot;);</b>
<b class="nc">&nbsp;        popupWindow.setSize(480, 280);</b>
<b class="nc">&nbsp;        popupWindow.setPosition(</b>
<b class="nc">&nbsp;                (game.width - popupWindow.getWidth()) / 2,</b>
<b class="nc">&nbsp;                (game.height - popupWindow.getHeight()) / 2</b>
&nbsp;        );
&nbsp;
&nbsp;        // Table for elements
<b class="nc">&nbsp;        Table popupTable = new Table();</b>
<b class="nc">&nbsp;        popupWindow.add(popupTable).prefSize(popupWindow.getWidth(), popupTable.getHeight());</b>
&nbsp;
&nbsp;        // Question
<b class="nc">&nbsp;        Label question = new Label(&quot;Enter name:&quot;,skin, &quot;leaderboardscore&quot;);</b>
<b class="nc">&nbsp;        question.setWrap(true);</b>
<b class="nc">&nbsp;        question.setAlignment(1);</b>
<b class="nc">&nbsp;        popupTable.add(question).prefWidth(popupWindow.getWidth() * 0.9f).colspan(2).padTop(20);</b>
<b class="nc">&nbsp;        popupTable.row();</b>
&nbsp;
&nbsp;        // Text entry field
<b class="nc">&nbsp;        TextField nameField = new TextField(&quot;&quot;, skin);</b>
<b class="nc">&nbsp;        nameField.setMaxLength(15);</b>
<b class="nc">&nbsp;        popupTable.add(nameField).prefWidth(300).padBottom(15);</b>
<b class="nc">&nbsp;        popupTable.row();</b>
&nbsp;
&nbsp;        // Submit button
<b class="nc">&nbsp;        TextButton submitButton = new TextButton(&quot;Submit&quot;, skin);</b>
&nbsp;
<b class="nc">&nbsp;        popupTable.add(submitButton).prefWidth(200).padBottom(20);</b>
<b class="nc">&nbsp;        popupTable.row();</b>
&nbsp;
<b class="nc">&nbsp;        Label errorText = new Label(&quot;Name must be non-blank and alphanumerical!&quot;, skin, &quot;smallerror&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        submitButton.addListener(new ChangeListener() {</b>
&nbsp;            @Override
&nbsp;            public void changed(ChangeListener.ChangeEvent event, Actor actor) {
<b class="nc">&nbsp;                soundController.playSound(Sounds.CONFIRM);</b>
&nbsp;                // Check input
<b class="nc">&nbsp;                String name = nameField.getText();</b>
<b class="nc">&nbsp;                if (LeaderboardManager.isValidName(name)) {</b>
&nbsp;                    // If valid, write this score
<b class="nc">&nbsp;                    LeaderboardManager.writeScore(name, calcScore());</b>
<b class="nc">&nbsp;                    game.switchScreen(AvailableScreens.MenuScreen, false);</b>
&nbsp;                } else {
&nbsp;                    // Show an error message
<b class="nc">&nbsp;                    errorText.setVisible(true);</b>
&nbsp;                }
&nbsp;            }
&nbsp;        });
&nbsp;
&nbsp;        // Error text
<b class="nc">&nbsp;        popupTable.add(errorText);</b>
<b class="nc">&nbsp;        errorText.setVisible(false);</b>
&nbsp;
&nbsp;
<b class="nc">&nbsp;        popupWindow.setVisible(false);</b>
<b class="nc">&nbsp;        return popupWindow;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    @Override
<b class="nc">&nbsp;    public void show() { }</b>
&nbsp;
&nbsp;    @Override
&nbsp;    public void render(float delta) {
<b class="nc">&nbsp;        Gdx.gl.glClearColor(0, 0, 0, 1);</b>
<b class="nc">&nbsp;        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT | GL20.GL_DEPTH_BUFFER_BIT);</b>
&nbsp;
<b class="nc">&nbsp;        stage.act(Math.min(Gdx.graphics.getDeltaTime(), 1 / 30f));</b>
<b class="nc">&nbsp;        stage.draw();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Correctly resizes the onscreen elements when the window is resized
&nbsp;     * @param width The width of the game screen
&nbsp;     * @param height The height of the game screen
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void resize(int width, int height) {
<b class="nc">&nbsp;        stage.getViewport().update(width, height);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
<b class="nc">&nbsp;    public void pause() { }</b>
&nbsp;
&nbsp;    @Override
<b class="nc">&nbsp;    public void resume() { }</b>
&nbsp;
&nbsp;    @Override
<b class="nc">&nbsp;    public void hide() { }</b>
&nbsp;
&nbsp;    /**
&nbsp;     * Method which disposes anything no longer required when changing screens
&nbsp;     */
&nbsp;    @Override
&nbsp;    public void dispose() {
<b class="nc">&nbsp;        stage.dispose();</b>
<b class="nc">&nbsp;        backgroundTexture.dispose();</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Determines the secret achievements the player has achieved
&nbsp;     * based on the activities completed.
&nbsp;     * Adds these to the set of achievements
&nbsp;     */
&nbsp;    private void getAchievements() {
<b class="nc">&nbsp;        if (stepAchievement) {</b>
<b class="nc">&nbsp;            achievements.add(new Achievement(</b>
&nbsp;                    &quot;Walker&quot;,
&nbsp;                    &quot;Walk 200 steps each day&quot;,
&nbsp;                    200
&nbsp;            ));
<b class="nc">&nbsp;            numAchievements += 1;</b>
&nbsp;        }
&nbsp;
&nbsp;        // Give if the player went clubbing at least once
<b class="nc">&nbsp;        if (activities.containsKey(&quot;club&quot;)) {</b>
<b class="nc">&nbsp;            achievements.add(new Achievement(</b>
&nbsp;                    &quot;Clubber&quot;,
&nbsp;                    &quot;Go clubbing at least once&quot;,
&nbsp;                    500
&nbsp;            ));
<b class="nc">&nbsp;            numAchievements += 1;</b>
&nbsp;        }
&nbsp;
&nbsp;        // Give if the player fed the ducks at least six times
<b class="nc">&nbsp;        if (activities.containsKey(&quot;ducks&quot;)) {</b>
<b class="nc">&nbsp;            if (activities.get(&quot;ducks&quot;).getTimesCompleted() &gt;= 6) {</b>
<b class="nc">&nbsp;                achievements.add(new Achievement(</b>
&nbsp;                        &quot;Duck duck go&quot;,
&nbsp;                        &quot;Feed the ducks 6 times&quot;,
&nbsp;                        300
&nbsp;                ));
<b class="nc">&nbsp;                numAchievements += 1;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        // Give if the player goes to the gym at least 3 times per week
<b class="nc">&nbsp;        if (activities.containsKey(&quot;gym&quot;)) {</b>
<b class="nc">&nbsp;            if (activities.get(&quot;gym&quot;).getTimesCompleted() &gt;= 3) {</b>
<b class="nc">&nbsp;                achievements.add(new Achievement(</b>
&nbsp;                        &quot;Gymbro&quot;,
&nbsp;                        &quot;Go to the gym at least 3 times per week&quot;,
&nbsp;                        500
&nbsp;                ));
<b class="nc">&nbsp;                numAchievements += 1;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Adds negative achievements, or &#39;penalties&#39; if the player has not eaten
&nbsp;     * or studied enough etc.
&nbsp;     * If the player hasn&#39;t done a type of activity, they get given a
&nbsp;     * &#39;super&#39; penalty, which takes off even more points.
&nbsp;     */
&nbsp;    private void getPenalties() {
&nbsp;        // Player should ideally get between 50-60 hours of sleep each week
<b class="nc">&nbsp;        if (categoryHours.get(&quot;sleep&quot;) &lt; 50 ) {</b>
<b class="nc">&nbsp;            achievements.add(new Achievement(</b>
&nbsp;                    &quot;Zombie&quot;,
&nbsp;                    &quot;You didn&#39;t get enough sleep!&quot;,
&nbsp;                    -500
&nbsp;            ));
&nbsp;        }
&nbsp;
&nbsp;        // 2 hours of study each day
<b class="nc">&nbsp;        if (categoryHours.get(&quot;study&quot;) &lt; 14) {</b>
<b class="nc">&nbsp;            achievements.add(new Achievement(</b>
&nbsp;                    &quot;Clueless&quot;,
&nbsp;                    &quot;You didn&#39;t study enough!&quot;,
&nbsp;                    -1000
&nbsp;            ));
&nbsp;        }
&nbsp;
&nbsp;        // Eat 3 meals a day
<b class="nc">&nbsp;        if (categoryHours.get(&quot;eat&quot;) &lt; 21) {</b>
<b class="nc">&nbsp;            achievements.add(new Achievement(</b>
&nbsp;                    &quot;Hungry&quot;,
&nbsp;                    &quot;You didn&#39;t eat well enough!&quot;,
&nbsp;                    -500
&nbsp;            ));
&nbsp;        }
&nbsp;
&nbsp;        // Two hours of fun each day
<b class="nc">&nbsp;        if (categoryHours.get(&quot;recreation&quot;) &lt; 14) {</b>
<b class="nc">&nbsp;            achievements.add(new Achievement(</b>
&nbsp;                    &quot;Party Pooper&quot;,
&nbsp;                    &quot;You didn&#39;t have enough fun!&quot;,
&nbsp;                    -500
&nbsp;            ));
&nbsp;        }
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-05-20 15:06</div>
</div>
</body>
</html>
